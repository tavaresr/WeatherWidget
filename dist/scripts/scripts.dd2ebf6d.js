"use strict";angular.module("weatherBlipApp",[]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter,{event:b})}),b.preventDefault())})}}).factory("weatherService",["$http",function(a){function b(a,b){var c=d.replace("%s",a),f=c.replace("%d",b);return e+f}function c(c,d){var e=b(c,d);return a.get(e)}var d='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="%s") and u="%d"',e="https://query.yahooapis.com/v1/public/yql?format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&q=";return{getWeather:c}}]),angular.module("weatherBlipApp").controller("weatherCtrl",["$scope","weatherService",function(a,b){function c(c,d){a.showData=!1,b.getWeather(c,d).then(function(b){1===b.data.query.count?(console.log(b.data.query.results.channel),a.place=b.data.query.results.channel,a.temp=b.data.query.results.channel.item.condition.temp+"ยบ",a.location=b.data.query.results.channel.location.city+", "+b.data.query.results.channel.location.country,a.text=b.data.query.results.channel.item.condition.text,a.showData=!0):(a.error="City not found.",a.showError=!0)},function(b){console.log("Error to retriving data from server! "+b.status+" "+b.statusText),a.error="Error: "+b.status+" "+b.statusText,a.showError=!0}).finally(function(){a.loading=!1})}a.unit="c",a.showData=!1,a.showError=!1,a.setUnit=function(b){a.unit=b,a.findWeather(a.city)},a.findWeather=function(b){a.place="",a.error="",a.showError=!1,a.showData=!1,a.loading=!0,a.loadingMsg="Loading, please wait...",c(b,a.unit)}}]);